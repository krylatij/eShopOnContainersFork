


d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Basket/Basket.API/Dockerfile -t eshop/basket.api:linux-latest  .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Ordering/Ordering.API/Dockerfile -t eshop/ordering.api:linux-latest .
d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Ordering/Ordering.BackgroundTasks/Dockerfile -t eshop/ordering.backgroundtasks:linux-latest .
d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Ordering/Ordering.SignalrHub/Dockerfile -t eshop/ordering.signalrhub:linux-latest .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Catalog/Catalog.API/Dockerfile -t eshop/catalog.api:linux-latest .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Coupon/Coupon.API/Dockerfile -t eshop/coupon.api:linux-latest .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Services/Payment/Payment.API/Dockerfile -t eshop/payment.api:linux-latest .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Web/WebSPA/Dockerfile -t eshop/webspa:linux-latest .

d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f Web/WebMVC/Dockerfile -t eshop/webmvc:linux-latest .


d:\work\t-shape\project\eShopOnContainersFork\src>docker build -f ApiGateways/Web.Bff.Shopping/aggregator/Dockerfile -t eshop/webshoppingagg:linux-latest .


kubectl apply -f .\nodeports\rabbitmq-admin.yaml
kubectl apply -f .\nodeports\rabbitmq-admin.yaml

kubectl apply -f .\nginx-ingress\mandatory.yaml
kubectl apply -f .\nginx-ingress\local-cm.yaml
kubectl apply -f .\nginx-ingress\local-svc.yaml

D:\work\t-shape\project\eShopOnContainersFork\deploy\k8s\helm> .\deploy-all.ps1 -imageTag linux-latest -useLocalk8s $true -imagePullPolicy Never


kubectl exec --stdin --tty eshop-webmvc-569d77977b-x2m89 -- /bin/bash

/api/v1/Basket/coupon/{code}

helm get all eshop-webmvc


helm install webmvc -f app.yaml --values inf.yaml -f ingress_values_dockerk8s.yaml -f ingress_values_linkerd.yaml --set app.name=eshop --set inf.k8s.dns=localhost --set ingress.hosts={localhost} --set image.tag=linux-latest --set image.pullPolicy=Never --set inf.tls.enabled=$false --set inf.mesh.enabled=$false --set inf.k8s.local=$true 

$chart "-f app.yaml --values inf.yaml -f $ingressValuesFile -f $ingressMeshAnnotationsFile --set app.name=$appName --set inf.k8s.dns=$dns --set ingress.hosts={$dns} --set image.tag=$imageTag --set image.pullPolicy=$imagePullPolicy --set inf.tls.enabled=$sslEnabled --set inf.mesh.enabled=$useMesh --set inf.k8s.local=$useLocalk8s" $useCustomRegistry
        }



helm uninstall eshop-webmvc

helm install eshop-webmvc -f app.yaml --values inf.yaml -f ingress_values_dockerk8s.yaml -f ingress_values_linkerd.yaml --set app.name=eshop --set inf.k8s.dns=localhost  --set "ingress.hosts={localhost}" --set image.tag=linux-latest --set image.pullPolicy=Never --set inf.tls.enabled=$false --set inf.mesh.enabled=$false --set inf.k8s.local=$true webmvc